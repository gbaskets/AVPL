{% extends 'user_app/base.html' %}
{% load static %}
{% block title %}Dashboard{% endblock %}
{% block main %}
<!-- Main Content -->
<div class="main-content">
  <section class="section">
    <div class="section-header">
      <div class="row">
        <div class="col-xl-6 col-lg-6 col-md-6 col-sm-12">
          <div class="section-header-breadcrumb-content">
            <h1>Dashboard</h1>
            <div class="section-header-breadcrumb">
              <div class="breadcrumb-item active"><a href="/user/"><i class="fas fa-home"></i></a></div>
              <div class="breadcrumb-item"><a href="#">Dashboard</a></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="section-body">
      <div class="row">
        <div class="col-12">
          <div class="card">
            <div class="card-header">
              <h4>Wallet</h4>
            </div>
            <div class="card-body">



              <div class="row">

                <div class="col-lg-3 col-md-12 col-sm-12">
                  <h4><i class="fa fa-dashcube"></i><a href="/user/wallet"> Current Balance </a></h4>
                  <hr style="border-width:5px;border-color:green;border-radius:20px;margin-bottm:10px;">
                  <h4><i class="fa fa-inr"></i> {{wallet.currentbalance|floatformat:2}}</h4>

                </div>


                {% comment %}
                <div class="col-lg-3 col-md-12 col-sm-12">
                  <h4><i class="fa fa-dashcube"></i> Points in Left | Points in Right</h4>

                  <hr style="border-width:5px;border-color:green;border-radius:20px;margin-bottm:10px;">
                  <h5><i class="fa fa-money"></i> {{pv.left|floatformat:0}} PV | {{pv.right|floatformat:0}} PV </h5>

                </div>

                <div class="col-lg-3 col-md-12 col-sm-12">
                  <h4><i class="fa fa-dashcube"></i> Points By Level</h4>
                  <hr style="border-width:5px;border-color:green;border-radius:20px;margin-bottm:10px;">
                  <h5><i class="fa fa-money"></i> {{pv.level|floatformat:0}} PV</h5>
                </div>
                <div class="col-lg-3 col-md-12 col-sm-12">
                  <h4><i class="fa fa-dashcube"></i> <a href="/user/pvwallet"> Self PV </a></h4>
                  <hr style="border-width:5px;border-color:green;border-radius:20px;margin-bottm:10px;">
                  <h5><i class="fa fa-money"></i> {{user.pv|floatformat:0}} PV</h5>
                </div>

                {% endcomment %}



              </div>
            </div>
          </div>
        </div>
      </div>
  </section>


  <div class="section-body">
    <div class="row">
      <div class="col-12">
        <div class="card">
          <div class="card-header">
            <h4>My Order</h4>
          </div>
          <div class="shop">
            <div class="container">
              <div class="row">
                <div class="col-lg-12">
                  <!-- Featured -->
                  <div class="shopping-cart">

                    
                    <div class="product pt-4 pb-4 ">
                      <div class="row">
                        <div class="col-lg-5 col-sm-12">
                          <div class="input-group">
                            <input type="text" class="form-control border border-right-0"
                              placeholder="Search your product...">
                            <span class="input-group-append bg-secondary">
                              <button class="btn btn-outline-light border border-left-0" type="button">
                                <i class="fa fa-search"></i>
                              </button>
                            </span>
                          </div>
                        </div>

                      </div>



                    </div>

  
             
              
                    <div class="col-sm-12">

                      <ul class="nav nav-tabs"  role="tablist">
                        <li role="presentation" class="nav-link active"><a href="#myallorder" aria-controls="myallorder" role="tab"
                            data-toggle="tab">All Order</a></li>
                        <li role="presentation" class="nav-link"><a href="#mypendingdorder" aria-controls="mypendingdorder"
                          role="tab" data-toggle="tab">Pending Order</a></li>
                        <li role="presentation" class="nav-link"><a href="#mydeliveredorder" aria-controls="mydeliveredorder"
                            role="tab" data-toggle="tab">Delivered Order</a></li>
                        <li role="presentation" class="nav-link"><a href="#myreturnorder" aria-controls="myreturnorder"
                          role="tab" data-toggle="tab">Return Order</a></li>
                        <li role="presentation" class="nav-link"><a href="#mycancelorder" aria-controls="mycancelorder"
                          role="tab" data-toggle="tab">Cancel Order</a></li>

                      </ul>

                      <div class="tab-content">
                        <div role="tabpanel" class="tab-pane active" id="myallorder">

                          <table class="table">
                            <thead>
                              <tr>
                                <th>#</th>
                                <th>Order ID</th>
                                <th>Order Date</th>
                                <th>Product</th>
                                <th>Order Amount</th>
                                <th>Payment Status</th>
                                <th>Order Status</th>
                                <th>Action</th>
                              </tr>
                            </thead>
                            <tbody>

                              {% for data in salesorder %}
                            
                              {% with first_orderitem=data.salesorders.first %}
                              
                             
                              <tr>
                                <td>{{data.id}}</td>
                                <td>{{data.orderno}}</td>
                                <td>{{data.createdat}}</td>
                                <td>
                                {% for orderitem in data.salesorders.all %}
                                {{orderitem.productvariants}}
                               <!-- <img style="height: 50px; width:50px;" src="{{orderitem.productvariants.productimage.url}}"> -->
                                {% endfor %}
                                </td>
                                <td>{{data.total}}</td>
                                <td> {% if data.ispaymentpaid == True %} <span class="badge badge-success"><b>Paid</b></span> {% else %} <span class="badge badge-danger"><b>UnPaid</b></span>  {% endif %}</td>
                                <td>

                                  {% if first_orderitem.orderstatus == 'Pending' %}
                                  <span class="badge badge-info">{{first_orderitem.orderstatus}}</span>
                                  {% endif %}
                                  {% if first_orderitem.orderstatus == 'Packed' %}
                                  <span class="badge badge-success">{{first_orderitem.orderstatus}}</span>
                                  {% endif %}
                                  {% if first_orderitem.orderstatus == 'Shipped' %}
                                  <span class="badge badge-danger">{{first_orderitem.orderstatus}}</span>
                                  {% endif %}
                                  {% if first_orderitem.orderstatus == 'Delivered' %}
                                  <h5>Delivered on {{first_orderitem.deliveredon}}</h5>
                                  {% endif %}
                                  {% if first_orderitem.orderstatus == 'Cancelled' %}
                                  <h5>Cancelled on {{first_orderitem.cancelledon}}</h5>
                                  {% endif %}
                                

                                </td>
                                <td><a href="#" >View Details</a></td>

                              </tr>
                            

                              {% endwith %}





                              {% endfor %}

                            </tbody>
                          </table>

                        </div>


                        <div role="tabpanel" class="tab-pane" id="mypendingdorder">

                          <table class="table">
                            <thead>
                              <tr>
                                <th>#</th>
                                <th>Order ID</th>
                                <th>Order Date</th>
                                <th>Product</th>
                                <th>Order Amount</th>
                                <th>Payment Status</th>
                                <th>Order Status</th>
                                <th>Action</th>
                              </tr>
                            </thead>
                            <tbody>

                              {% for data in salesorder %}
                

                              {% with first_orderitem=data.salesorders.first %}

                              {% if first_orderitem.orderstatus == 'Pending' %}

                              <tr>
                                <td>{{data.id}}</td>
                                <td>{{data.orderno}}</td>
                                <td>{{data.createdat}}</td>
                                <td>
                                {% for orderitem in data.salesorders.all %}
                                {{orderitem.productvariants}}
                               <!-- <img style="height: 50px; width:50px;" src="{{orderitem.productvariants.productimage.url}}"> -->
                                {% endfor %}
                                </td>
                                <td>{{data.total}}</td>
                                <td> {% if data.ispaymentpaid == True %} <span class="badge badge-success"><b>Paid</b></span> {% else %} <span class="badge badge-danger"><b>UnPaid</b></span>  {% endif %}</td>
                                <td>

                                  {% if first_orderitem.orderstatus == 'Pending' %}
                                  <span class="badge badge-info">{{first_orderitem.orderstatus}}</span>
                                  {% endif %}
                                  {% if first_orderitem.orderstatus == 'Packed' %}
                                  <span class="badge badge-success">{{first_orderitem.orderstatus}}</span>
                                  {% endif %}
                                  {% if first_orderitem.orderstatus == 'Shipped' %}
                                  <span class="badge badge-danger">{{first_orderitem.orderstatus}}</span>
                                  {% endif %}
                                  {% if first_orderitem.orderstatus == 'Delivered' %}
                                  <h5>Delivered on {{first_orderitem.deliveredon}}</h5>
                                  {% endif %}
                                  {% if first_orderitem.orderstatus == 'Cancelled' %}
                                  <h5>Cancelled on {{first_orderitem.cancelledon}}</h5>
                                  {% endif %}
                                

                                </td>
                                <td><a href="#" >View Details</a></td>

                              </tr>
                               
                              {% endif %}
                              {% endwith %}





                              {% endfor %}

                            </tbody>
                          </table>
                        
                        </div>

                        <div role="tabpanel" class="tab-pane" id="mydeliveredorder">

                          <table class="table">
                            <thead>
                              <tr>
                                <th>#</th>
                                <th>Order ID</th>
                                <th>Order Date</th>
                                <th>Product</th>
                                <th>Order Amount</th>
                                <th>Payment Status</th>
                                <th>Order Status</th>
                                <th>Action</th>
                              </tr>
                            </thead>
                            <tbody>

                              {% for data in salesorder %}
                

                              {% with first_orderitem=data.salesorders.first %}

                              {% if first_orderitem.orderstatus == 'Delivered' %}

                              <tr>
                                <td>{{data.id}}</td>
                                <td>{{data.orderno}}</td>
                                <td>{{data.createdat}}</td>
                                <td>
                                {% for orderitem in data.salesorders.all %}
                                {{orderitem.productvariants}}
                               <!-- <img style="height: 50px; width:50px;" src="{{orderitem.productvariants.productimage.url}}"> -->
                                {% endfor %}
                                </td>
                                <td>{{data.total}}</td>
                                <td> {% if data.ispaymentpaid == True %} <span class="badge badge-success"><b>Paid</b></span> {% else %} <span class="badge badge-danger"><b>UnPaid</b></span>  {% endif %}</td>
                                <td>

                                  {% if first_orderitem.orderstatus == 'Pending' %}
                                  <span class="badge badge-info">{{first_orderitem.orderstatus}}</span>
                                  {% endif %}
                                  {% if first_orderitem.orderstatus == 'Packed' %}
                                  <span class="badge badge-success">{{first_orderitem.orderstatus}}</span>
                                  {% endif %}
                                  {% if first_orderitem.orderstatus == 'Shipped' %}
                                  <span class="badge badge-danger">{{first_orderitem.orderstatus}}</span>
                                  {% endif %}
                                  {% if first_orderitem.orderstatus == 'Delivered' %}
                                  <h5>Delivered on {{first_orderitem.deliveredon}}</h5>
                                  {% endif %}
                                  {% if first_orderitem.orderstatus == 'Cancelled' %}
                                  <h5>Cancelled on {{first_orderitem.cancelledon}}</h5>
                                  {% endif %}
                                

                                </td>
                                <td><a href="#" >View Details</a></td>

                              </tr>
                               
                              {% endif %}
                              {% endwith %}





                              {% endfor %}

                            </tbody>
                          </table>
                        
                        </div>

                        <div role="tabpanel" class="tab-pane" id="myreturnorder">

                          <table class="table">
                            <thead>
                              <tr>
                                <th>#</th>
                                <th>Order ID</th>
                                <th>Order Date</th>
                                <th>Product</th>
                                <th>Order Amount</th>
                                <th>Payment Status</th>
                                <th>Order Status</th>
                                <th>Action</th>
                              </tr>
                            </thead>
                            <tbody>

                              {% for data in salesorder %}
                

                              {% with first_orderitem=data.salesorders.first %}
                              {% if first_orderitem.orderstatus == 'Return' %}
                              <tr>
                                <td>{{data.id}}</td>
                                <td>{{data.orderno}}</td>
                                <td>{{data.createdat}}</td>
                                <td>
                                {% for orderitem in data.salesorders.all %}
                                {{orderitem.productvariants}}
                               <!-- <img style="height: 50px; width:50px;" src="{{orderitem.productvariants.productimage.url}}"> -->
                                {% endfor %}
                                </td>
                                <td>{{data.total}}</td>
                                <td> {% if data.ispaymentpaid == True %} <span class="badge badge-success"><b>Paid</b></span> {% else %} <span class="badge badge-danger"><b>UnPaid</b></span>  {% endif %}</td>
                                <td>

                                  {% if first_orderitem.orderstatus == 'Pending' %}
                                  <span class="badge badge-info">{{first_orderitem.orderstatus}}</span>
                                  {% endif %}
                                  {% if first_orderitem.orderstatus == 'Packed' %}
                                  <span class="badge badge-success">{{first_orderitem.orderstatus}}</span>
                                  {% endif %}
                                  {% if first_orderitem.orderstatus == 'Shipped' %}
                                  <span class="badge badge-danger">{{first_orderitem.orderstatus}}</span>
                                  {% endif %}
                                  {% if first_orderitem.orderstatus == 'Delivered' %}
                                  <h5>Delivered on {{first_orderitem.deliveredon}}</h5>
                                  {% endif %}
                                  {% if first_orderitem.orderstatus == 'Cancelled' %}
                                  <h5>Cancelled on {{first_orderitem.cancelledon}}</h5>
                                  {% endif %}
                                

                                </td>
                                <td><a href="#" >View Details</a></td>

                              </tr>

                              {% endif %}
                              {% endwith %}





                              {% endfor %}

                            </tbody>
                          </table>

                        </div>

                        <div role="tabpanel" class="tab-pane" id="mycancelorder">

                         
                          <table class="table">
                            <thead>
                              <tr>
                                <th>#</th>
                                <th>Order ID</th>
                                <th>Order Date</th>
                                <th>Product</th>
                                <th>Order Amount</th>
                                <th>Payment Status</th>
                                <th>Order Status</th>
                                <th>Action</th>
                              </tr>
                            </thead>
                            <tbody>

                              {% for data in salesorder %}
                

                              {% with first_orderitem=data.salesorders.first %}
                              {% if first_orderitem.orderstatus == 'Cancelled' %}
                              
                              <tr>
                                <td>{{data.id}}</td>
                                <td>{{data.orderno}}</td>
                                <td>{{data.createdat}}</td>
                                <td>
                                {% for orderitem in data.salesorders.all %}
                                {{orderitem.productvariants}}
                               <!-- <img style="height: 50px; width:50px;" src="{{orderitem.productvariants.productimage.url}}"> -->
                                {% endfor %}
                                </td>
                                <td>{{data.total}}</td>
                                <td> {% if data.ispaymentpaid == True %} <span class="badge badge-success"><b>Paid</b></span> {% else %} <span class="badge badge-danger"><b>UnPaid</b></span>  {% endif %}</td>
                                <td>

                                  {% if first_orderitem.orderstatus == 'Pending' %}
                                  <span class="badge badge-info">{{first_orderitem.orderstatus}}</span>
                                  {% endif %}
                                  {% if first_orderitem.orderstatus == 'Packed' %}
                                  <span class="badge badge-success">{{first_orderitem.orderstatus}}</span>
                                  {% endif %}
                                  {% if first_orderitem.orderstatus == 'Shipped' %}
                                  <span class="badge badge-danger">{{first_orderitem.orderstatus}}</span>
                                  {% endif %}
                                  {% if first_orderitem.orderstatus == 'Delivered' %}
                                  <h5>Delivered on {{first_orderitem.deliveredon}}</h5>
                                  {% endif %}
                                  {% if first_orderitem.orderstatus == 'Cancelled' %}
                                  <h5>Cancelled on {{first_orderitem.cancelledon}}</h5>
                                  {% endif %}
                                

                                </td>
                                <td><a href="#" >View Details</a></td>

                              </tr>

                              {% endif %}
                              {% endwith %}





                              {% endfor %}

                            </tbody>
                          </table>

                        </div>





                      </div>






                    </div>

                    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>

                    <script>
                      $(document).ready(function(){
                        $('.nav-link').on('click', function(){
                          $('.nav-link').removeClass('active');
                          $(this).addClass('active');
                        });
                      });
                    </script>


                  </div>

                </div>
              </div>
            </div>
            </section>




            {% comment %} {% if tree %}
            <div class="section-body">
              <div class="row">
                <div class="col-12">
                  <div class="card">
                    <div class="card-header">
                      <h4>Members/Nodes Under You(Binary Plan)</h4>
                    </div>
                    <div class="card-body">
                      <div class="table-responsive">
                        <table class="table table-striped table-hover" id="tableExport" style="width:100%;">
                          <thead>
                            <tr>
                              <th>Name</th>
                              <th>Contact</th>
                            </tr>
                          </thead>
                          <tbody>
                            {% for x in tree.left %}
                            <tr>
                              <td>{{ x.usr.first_name|safe }} {{ x.usr.last_name|safe }}</td>
                              <td>+91-{{ x.usr.phone|safe }}</td>
                            </tr>
                            {% endfor %}
                            {% for x in tree.right %}
                            <tr>
                              <td>{{ x.usr.first_name|safe }} {{ x.usr.last_name|safe }}</td>
                              <td>+91-{{ x.usr.phone|safe }}</td>
                            </tr>
                            {% endfor %}
                          </tbody>
                        </table>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            </section>

            {% else %}
            <div class="section-body">
              <div class="row">
                <div class="col-12">
                  <div class="card">
                    <div class="card-header">
                      <h4>Members Under You</h4>
                    </div>
                    <div class="card-body">
                      <div class="table-responsive">
                        <table class="table table-striped table-hover" id="tableExport" style="width:100%;">
                          <thead>
                            <tr>
                              <th>Name</th>
                              <th>Contact</th>
                            </tr>
                          </thead>
                          <tbody>
                            {% for x in referrals %}
                            <tr>
                              <td>{{ x.referrals.usr.first_name|safe }} {{ x.referrals.usr.last_name|safe }}</td>
                              <td>+91-{{ x.referrals.usr.phone|safe }}</td>
                            </tr>
                            {% endfor %}

                          </tbody>
                        </table>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            </section>

            {% endif %}

            {% endcomment %}


          </div>


















          
          {% endblock %}
